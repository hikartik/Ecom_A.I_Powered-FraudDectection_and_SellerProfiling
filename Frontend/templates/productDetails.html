<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Detail - Samsung Galaxy S24 Ultra</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Amazon Ember", Arial, sans-serif;
      }

      body {
        background-color: #f3f3f3;
        line-height: 1.5;
      }

      header {
        background-color: #131921;
        color: white;
      }

      .top-bar {
        display: flex;
        align-items: center;
        padding: 15px 30px;
        max-width: 1200px;
        margin: 0 auto;
        gap: 20px;
      }

      .logo img {
        width: 100px;
        margin-right: 0;
      }

      .location {
        margin: 0;
        cursor: pointer;
        font-size: 14px;
      }

      .search-bar {
        flex-grow: 1;
        display: flex;
        align-items: center;
        background-color: #fff;
        border-radius: 4px;
        overflow: hidden;
      }

      .search-bar select {
        padding: 12px;
        border: none;
        background-color: #f3f3f3;
        border-right: 1px solid #ddd;
        font-size: 14px;
      }

      .search-bar input {
        flex-grow: 1;
        padding: 12px;
        border: none;
        font-size: 14px;
      }

      .search-bar button {
        padding: 12px 18px;
        background-color: #febd69;
        border: none;
        border-radius: 0 4px 4px 0;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .search-bar button:hover {
        background-color: #f3a847;
      }

      .user-options {
        display: flex;
        align-items: center;
        margin-left: 0;
        gap: 15px;
      }

      .user-options a {
        color: white;
        text-decoration: none;
        margin: 0;
        font-size: 14px;
        line-height: 1.2;
      }

      .user-options a:hover {
        color: #ffd814;
      }

      .language-selector {
        display: flex;
        align-items: center;
        margin-right: 0;
      }

      .language-selector .flag-icon {
        margin-right: 5px;
      }

      .language-selector select {
        background-color: #232f3e;
        color: white;
        border: none;
        padding: 6px;
        cursor: pointer;
      }

      .verified-toggle {
        display: flex;
        align-items: center;
        margin-left: 0;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 40px;
        height: 20px;
        margin-right: 10px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 20px;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 2px;
        bottom: 2px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .slider {
        background-color: #4caf50;
      }

      input:checked + .slider:before {
        transform: translateX(20px);
      }

      .verified-toggle span {
        color: white;
        font-size: 14px;
      }

      .tooltip {
        display: none;
        position: absolute;
        background-color: #333;
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 12px;
        margin-left: 5px;
        z-index: 1;
      }

      .verified-toggle:hover .tooltip {
        display: block;
      }

      .main-nav {
        background-color: #232f3e;
        padding: 10px 30px;
        max-width: 100%;
        margin: 0 auto;
      }

      .main-nav ul {
        list-style: none;
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .main-nav li {
        margin-right: 0;
      }

      .main-nav a {
        color: white;
        text-decoration: none;
        font-size: 14px;
        padding: 6px 12px;
        transition: color 0.3s;
      }

      .main-nav a:hover {
        color: #ffd814;
        background-color: #2a3f5a;
        border-radius: 3px;
      }

      .container {
        display: flex;
        padding: 30px;
        max-width: 1200px;
        margin: 0 auto;
        align-items: flex-start;
        gap: 30px;
        flex-wrap: wrap;
      }

      /* Filter Sidebar Styles */
      .filter-sidebar {
        width: 280px;
        background: white;
        padding: 20px;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        height: fit-content;
        position: sticky;
        top: 20px;
      }

      .filter-sidebar h3 {
        margin-bottom: 20px;
        color: #0f1111;
        font-size: 18px;
        border-bottom: 2px solid #febd69;
        padding-bottom: 10px;
      }

      .filter-section {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid #f0f0f0;
      }

      .filter-section:last-child {
        border-bottom: none;
      }

      .filter-section h4 {
        margin-bottom: 10px;
        color: #0f1111;
        font-size: 14px;
        font-weight: 600;
      }

      .filter-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }

      .filter-input:focus {
        outline: none;
        border-color: #febd69;
        box-shadow: 0 0 0 2px rgba(254, 189, 105, 0.2);
      }

      /* Range Slider Styles */
      .range-slider {
        width: 100%;
        margin: 10px 0;
        -webkit-appearance: none;
        appearance: none;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
      }

      .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #febd69;
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .range-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #febd69;
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .price-labels,
      .ai-score-labels {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
        color: #666;
        margin-top: 5px;
      }

      /* Checkbox Styles */
      .filter-checkbox {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
        cursor: pointer;
        font-size: 14px;
        color: #0f1111;
      }

      .filter-checkbox input[type="checkbox"] {
        margin-right: 8px;
        width: 16px;
        height: 16px;
        accent-color: #febd69;
      }

      /* Select Styles */
      .filter-select {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        background: white;
        cursor: pointer;
      }

      .filter-select:focus {
        outline: none;
        border-color: #febd69;
      }

      /* Clear Filters Button */
      .clear-filters-btn {
        width: 100%;
        padding: 10px;
        background: #ff6b6b;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .clear-filters-btn:hover {
        background: #ff5252;
      }

      /* Products Container */
      .products-container {
        flex: 1;
        min-width: 0;
      }

      .products-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding: 15px;
        background: white;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .products-header h2 {
        color: #0f1111;
        font-size: 20px;
        margin: 0;
      }

      #productCount {
        color: #666;
        font-size: 14px;
      }

      /* Products Grid */
      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 15px;
      }

      .product-card {
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.2s ease, transform 0.2s ease;
        cursor: pointer;
        position: relative;
        display: flex;
        flex-direction: column;
        min-height: 320px;
      }

      .product-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 5px;
        height: 100%;
        border-radius: 8px 0 0 8px;
        background-color: #ccc;
      }

      .product-card.score-high::before {
        background-color: #4caf50; /* Green for >80% */
      }

      .product-card.score-medium::before {
        background-color: #ff9800; /* Orange for 60-80% */
      }

      .product-card.score-low::before {
        background-color: #f44336; /* Red for <60% */
      }

      .product-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }

      .product-card .image-container {
        width: 100%;
        height: 200px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 12px;
      }

      .product-card img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 4px;
      }

      .product-card h3 {
        font-size: 16px;
        color: #0f1111;
        margin-bottom: 8px;
        line-height: 1.3;
        font-weight: 400;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }

      .product-card .description {
        color: #565959;
        font-size: 13px;
        margin-bottom: 8px;
        line-height: 1.4;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }

      .product-card .ai-score {
        font-size: 14px;
        margin-bottom: 8px;
        font-weight: bold;
      }

      .product-card .rating-section {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        margin-bottom: 8px;
      }

      .product-card .stars {
        color: #febd69;
        font-size: 16px;
        letter-spacing: 1px;
      }

      .product-card .rating-text {
        color: #0066c0;
        font-size: 14px;
        font-weight: bold;
      }

      .product-card .status {
        font-size: 12px;
        font-weight: bold;
        padding: 3px 8px;
        border-radius: 12px;
        display: inline-block;
        margin-bottom: 8px;
      }

      .product-card .status.valid {
        background: #d4edda;
        color: #155724;
      }

      .product-card .status.blocked_ai {
        background: #f8d7da;
        color: #721c24;
      }

      .product-card .status.blocked_batch {
        background: #fff3cd;
        color: #856404;
      }

      .product-card .price {
        color: #b12704;
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 12px;
      }

      .product-card .buttons {
        display: flex;
        gap: 8px;
        margin-top: auto;
      }

      .product-card .buttons button {
        flex: 1;
        padding: 8px 10px;
        border: none;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.1s;
        text-align: center;
      }

      .product-card .buttons .add-to-cart {
        background: #ffd814;
        color: #0f1111;
      }

      .product-card .buttons .add-to-cart:hover {
        background: #f7ca00;
        transform: translateY(-1px);
      }

      .product-card .buttons .view-details {
        background: #f7f7f7;
        color: #0f1111;
        border: 1px solid #ddd;
      }

      .product-card .buttons .view-details:hover {
        background: #e0e0e0;
        transform: translateY(-1px);
      }

      .container2 {
        display: flex;
        justify-content: space-between;
        width: 100%;
        gap: 30px;
      }

      .container3 {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .product-gallery {
        width: 45%;
        padding: 20px;
        background-color: white;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .main-image {
        width: 100%;
        height: auto;
        object-fit: contain;
        margin-bottom: 20px;
        border-bottom: 1px solid #e7e7e7;
      }

      .thumbnail-gallery {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .thumbnail-gallery img {
        width: 80px;
        height: 80px;
        object-fit: contain;
        cursor: pointer;
        border: 1px solid #ddd;
        transition: transform 0.3s ease, border-color 0.3s ease;
      }

      .thumbnail-gallery img:hover {
        transform: scale(1.1);
        border-color: #febd69;
      }

      .product-details {
        width: 100%;
        padding: 20px;
        background-color: white;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
      }

      .product-details h1 {
        font-size: 26px;
        margin: 0 0 15px;
        color: #0f1111;
        font-weight: 500;
      }

      .rating-ai,
      .ai-rating {
        color: #f39c12;
        margin-bottom: 10px;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .price {
        font-weight: bold;
        color: #b12704;
        font-size: 22px;
        margin-bottom: 15px;
      }

      .location {
        font-size: 14px;
        color: #565959;
        margin-bottom: 10px;
      }

      .delivery {
        color: #007600;
        font-size: 14px;
        margin-bottom: 10px;
      }

      .prime {
        color: #00a8e1;
        font-weight: bold;
        font-size: 14px;
        margin-bottom: 15px;
        display: inline-block;
        padding: 2px 8px;
        background-color: #f3f3f3;
        border-radius: 3px;
      }

      .buttons {
        margin-top: auto;
        margin-bottom: 15px;
      }

      .buttons button {
        padding: 12px 20px;
        margin-right: 10px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      #addToCart {
        background-color: #ffd814;
        color: #0f1111;
      }

      #addToCart:hover {
        background-color: #f7ca00;
        transform: translateY(-2px);
      }

      #buyNow {
        background-color: #ffa500;
        color: white;
      }

      #buyNow:hover {
        background-color: #e68a00;
        transform: translateY(-2px);
      }

      .availability {
        font-size: 14px;
        margin-top: 10px;
        color: #007600;
        font-weight: 500;
      }

      .product-description {
        width: 100%;
        padding: 20px;
        background-color: white;
        margin-top: 20px;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .product-description h2 {
        font-size: 20px;
        margin-bottom: 15px;
        color: #0f1111;
        font-weight: 500;
      }

      .product-description ul {
        list-style-type: disc;
        padding-left: 20px;
        color: #0f1111;
      }

      #aplusContent {
        margin-top: 20px;
        padding: 15px;
        border: 1px solid #e7e7e7;
        background-color: #f9f9f9;
        border-radius: 8px;
      }

      #aplusContent h3 {
        font-size: 18px;
        margin-bottom: 10px;
        color: #0f1111;
      }

      #aplusContent p {
        font-size: 14px;
        color: #565959;
        line-height: 1.6;
      }

      .related-items {
        width: 100%;
        padding: 20px;
        background-color: white;
        margin-top: 30px;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .related-items h2 {
        font-size: 20px;
        margin-bottom: 20px;
        color: #0f1111;
        font-weight: 500;
      }

      .product-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
      }

      .product-card {
        text-align: center;
        padding: 15px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 4px;
        transition: box-shadow 0.3s ease;
      }

      .product-card:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .product-card img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        margin-bottom: 15px;
      }

      .product-card p {
        margin: 8px 0;
        font-size: 14px;
        color: #0f1111;
      }

      .product-card .price {
        color: #b12704;
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 10px;
      }

      .product-card a {
        color: #007185;
        text-decoration: none;
        font-size: 12px;
      }

      .product-card a:hover {
        text-decoration: underline;
      }

      footer {
        text-align: center;
        padding: 15px;
        background-color: #232f3e;
        color: white;
        position: relative;
        width: 100%;
        margin-top: 30px;
        box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .top-bar {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
          padding: 15px 20px;
        }

        .search-bar {
          width: 100%;
          margin: 10px 0;
        }

        .user-options {
          margin-left: 0;
          flex-wrap: wrap;
          gap: 10px;
        }

        .main-nav ul {
          flex-direction: column;
          gap: 10px;
          padding: 10px 0;
        }

        .container {
          padding: 20px;
          gap: 20px;
          flex-direction: column;
        }

        .filter-sidebar {
          width: 100%;
          position: static;
          order: 1;
        }

        .products-container {
          order: 2;
        }

        .products-grid {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        .filter-sidebar {
          padding: 15px;
        }

        .filter-sidebar h3 {
          font-size: 16px;
        }

        .products-header {
          flex-direction: column;
          gap: 10px;
          text-align: center;
        }

        .products-grid {
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
          gap: 15px;
        }

        .product-card {
          padding: 12px;
        }

        .product-card .image-container {
          height: 150px;
        }

        .product-card h3 {
          font-size: 14px;
        }

        .product-card .description {
          font-size: 12px;
        }

        .product-card .price {
          font-size: 14px;
        }

        .product-card .buttons button {
          font-size: 12px;
          padding: 6px 8px;
        }
      }

      @media (max-width: 480px) {
        .top-bar {
          padding: 10px;
          gap: 10px;
        }

        .search-bar select,
        .search-bar input,
        .search-bar button {
          padding: 8px;
        }

        .container {
          padding: 10px;
        }

        .filter-sidebar {
          padding: 10px;
        }

        .products-grid {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .product-card {
          padding: 10px;
        }

        .product-card .image-container {
          height: 120px;
        }

        .product-card h3 {
          font-size: 13px;
        }

        .product-card .description {
          font-size: 11px;
        }

        .product-card .price {
          font-size: 13px;
        }

        .product-card .buttons {
          flex-direction: column;
          gap: 5px;
        }

        .product-card .buttons button {
          font-size: 11px;
          padding: 5px;
        }
      }

      /* User Menu Styles */
      .user-menu-container {
        position: relative;
        display: inline-block;
      }

      .user-menu-trigger {
        color: white;
        text-decoration: none;
        cursor: pointer;
        font-size: 14px;
        line-height: 1.2;
      }

      .user-menu-trigger:hover {
        color: #ffd814;
      }

      .user-dropdown-menu {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        min-width: 200px;
        z-index: 1000;
        margin-top: 5px;
      }

      .user-menu-header {
        padding: 12px 16px;
        border-bottom: 1px solid #f0f0f0;
        background: #f8f9fa;
        border-radius: 8px 8px 0 0;
      }

      .user-menu-header strong {
        display: block;
        color: #0f1111;
        font-size: 14px;
        margin-bottom: 2px;
      }

      .user-menu-divider {
        height: 1px;
        background: #e7e7e7;
        margin: 8px 0;
      }

      .user-menu-item {
        display: block;
        padding: 10px 16px;
        color: #0f1111;
        text-decoration: none;
        font-size: 14px;
        transition: background-color 0.2s ease;
      }

      .user-menu-item:hover {
        background-color: #f8f9fa;
        text-decoration: none;
      }

      .user-menu-item i {
        margin-right: 8px;
        width: 16px;
        color: #666;
      }

      .logout-btn {
        width: 100%;
        padding: 10px 16px;
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 0 0 8px 8px;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        text-align: left;
      }

      .logout-btn:hover {
        background: #c82333;
      }

      .logout-btn i {
        margin-right: 8px;
        width: 16px;
      }

      .product-card button:hover {
        background: linear-gradient(to bottom, #f0c14b 0%, #e6a23c 100%);
        border-color: #a88734;
        transform: translateY(-1px);
      }

      /* Pagination Styles */
      .pagination-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 30px;
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .pagination-info {
        margin: 0 20px;
        color: #666;
        font-size: 14px;
      }

      .pagination-controls {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .pagination-btn {
        padding: 8px 12px;
        border: 1px solid #ddd;
        background: white;
        color: #333;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 14px;
        min-width: 40px;
        text-align: center;
      }

      .pagination-btn:hover {
        background: #f8f9fa;
        border-color: #c45500;
      }

      .pagination-btn.active {
        background: #c45500;
        color: white;
        border-color: #c45500;
      }

      .pagination-btn:disabled {
        background: #f5f5f5;
        color: #999;
        cursor: not-allowed;
        border-color: #ddd;
      }

      .page-size-selector {
        margin-left: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .page-size-selector label {
        font-size: 14px;
        color: #666;
      }

      .page-size-selector select {
        padding: 6px 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="top-bar">
        <div class="logo">
          <img src="/static/amazon_logo.png" alt="Amazon.in" />
        </div>
        <div class="location">
          <i class="fas fa-map-marker-alt"></i>
          <span>Deliver to India</span>
        </div>
        <div class="search-bar">
          <select>
            <option>All</option>
            <option>Electronics</option>
            <option>Books</option>
            <option>Fashion</option>
          </select>
          <input type="text" placeholder="Search Amazon.in" />
          <button><i class="fas fa-search"></i></button>
        </div>
        <div class="user-options">
          <div class="language-selector">
            <img
              src="https://upload.wikimedia.org/wikipedia/en/4/41/Flag_of_India.svg"
              alt="India Flag"
              class="flag-icon"
              width="20"
            />
            <select>
              <option value="en">EN</option>
              <option value="hi">HI</option>
            </select>
          </div>
          <div id="auth-links">
            <a href="/login">Hello, Sign in<br />Account & Lists</a>
            <a href="/register">Register</a>
          </div>
          <a href="#">Returns<br />& Orders</a>
          <a href="#" class="cart"><i class="fas fa-shopping-cart"></i> Cart</a>
          <div class="verified-toggle">
            <label class="switch">
              <input type="checkbox" id="verifiedToggle" />
              <span class="slider round"></span>
            </label>
            <span>Verified Products</span>
          </div>
        </div>
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="#">All</a></li>
          <li><a href="#">Today's Deals</a></li>
          <li><a href="#">Customer Service</a></li>
          <li><a href="#">Registry</a></li>
          <li><a href="#">Gift Cards</a></li>
          <li><a href="#">Sell</a></li>
        </ul>
      </nav>
    </header>

    <!-- Main Content -->
    <main>
      <div class="container">
        <!-- Filter Sidebar -->
        <div class="filter-sidebar">
          <h3>Filters</h3>

          <!-- Search Filter -->
          <div class="filter-section">
            <h4>Search</h4>
            <input
              type="text"
              id="searchFilter"
              placeholder="Search products..."
              class="filter-input"
            />
          </div>

          <!-- Price Range Filter -->
          <div class="filter-section">
            <h4>Price Range</h4>
            <div class="price-range">
              <input
                type="range"
                id="priceMin"
                min="0"
                max="100000"
                value="0"
                class="range-slider"
              />
              <input
                type="range"
                id="priceMax"
                min="0"
                max="100000"
                value="100000"
                class="range-slider"
              />
              <div class="price-labels">
                <span id="priceMinLabel">₹0</span>
                <span id="priceMaxLabel">₹100,000</span>
              </div>
            </div>
          </div>

          <!-- AI Score Filter -->
          <div class="filter-section">
            <h4>AI Score</h4>
            <label class="filter-checkbox">
              <input type="checkbox" id="aiScoreAbove80" checked />
              <span>Above 80%</span>
            </label>
            <label class="filter-checkbox">
              <input type="checkbox" id="aiScoreBelow80" checked />
              <span>Below 80%</span>
            </label>
          </div>

          <!-- Status Filter -->
          <div class="filter-section">
            <h4>Status</h4>
            <label class="filter-checkbox">
              <input type="checkbox" id="statusValid" checked />
              <span>Valid Products</span>
            </label>
            <label class="filter-checkbox">
              <input type="checkbox" id="statusBlocked" />
              <span>Blocked Products</span>
            </label>
          </div>

          <!-- Sort Options -->
          <div class="filter-section">
            <h4>Sort By</h4>
            <select id="sortSelect" class="filter-select">
              <option value="name">Name (A-Z)</option>
              <option value="name-desc">Name (Z-A)</option>
              <option value="price-low">Price (Low to High)</option>
              <option value="price-high">Price (High to Low)</option>
              <option value="ai-score-high">AI Score (High to Low)</option>
              <option value="ai-score-low">AI Score (Low to High)</option>
            </select>
          </div>

          <!-- Clear Filters -->
          <button id="clearFilters" class="clear-filters-btn">
            Clear All Filters
          </button>
        </div>

        <!-- Products Grid -->
        <div class="products-container">
          <div class="products-header">
            <h2>Products</h2>
            <span id="productCount">0 products found</span>
          </div>
          <div id="productsGrid" class="products-grid">
            <!-- Products will be dynamically inserted here -->
          </div>
          <!-- Pagination Container -->
          <div
            id="paginationContainer"
            class="pagination-container"
            style="display: none"
          >
            <div class="pagination-controls">
              <button
                id="prevBtn"
                class="pagination-btn"
                onclick="previousPage()"
              >
                Previous
              </button>
              <div id="pageNumbers" class="pagination-controls"></div>
              <button id="nextBtn" class="pagination-btn" onclick="nextPage()">
                Next
              </button>
            </div>
            <div class="pagination-info">
              <span id="paginationInfo">Showing 0 of 0 products</span>
            </div>
            <div class="page-size-selector">
              <label for="pageSize">Show:</label>
              <select id="pageSize" onchange="changePageSize()">
                <option value="8">8 per page</option>
                <option value="12" selected>12 per page</option>
                <option value="16">16 per page</option>
                <option value="24">24 per page</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <p>© 2025 OnlineShop.in. All rights reserved.</p>
    </footer>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      let allProducts = [];
      let filteredProducts = [];

      // Pagination variables
      let currentPage = 1;
      let pageSize = 12;
      let totalPages = 1;

      // Fetch products from API
      async function fetchProducts() {
        try {
          const response = await fetch("/products/api/");
          const products = await response.json();
          console.log("Fetched products:", products);
          console.log("Number of products:", products.length);
          return products;
        } catch (error) {
          console.error("Error fetching products:", error);
          return [];
        }
      }

      // Initialize filters
      function initializeFilters() {
        // Calculate max price from products
        const maxPrice =
          allProducts.length > 0
            ? Math.max(...allProducts.map((p) => p.price || 0))
            : 100000;

        // Set price range slider max value
        const priceMaxSlider = document.getElementById("priceMax");
        const priceMinSlider = document.getElementById("priceMin");

        if (priceMaxSlider) {
          priceMaxSlider.max = maxPrice;
          priceMaxSlider.value = maxPrice;
        }

        // Update price range labels
        const priceMinLabel = document.getElementById("priceMinLabel");
        const priceMaxLabel = document.getElementById("priceMaxLabel");
        if (priceMinLabel) priceMinLabel.textContent = "₹0";
        if (priceMaxLabel)
          priceMaxLabel.textContent = `₹${maxPrice.toLocaleString()}`;

        // Set initial values
        if (priceMinSlider) priceMinSlider.value = 0;
        if (priceMaxSlider) priceMaxSlider.value = maxPrice;

        // Add event listeners for price range sliders
        if (priceMinSlider) {
          priceMinSlider.addEventListener("input", function () {
            const minValue = parseInt(this.value);
            const maxValue = parseInt(priceMaxSlider.value);

            if (minValue > maxValue) {
              priceMaxSlider.value = minValue;
              if (priceMaxLabel)
                priceMaxLabel.textContent = `₹${minValue.toLocaleString()}`;
            }

            if (priceMinLabel)
              priceMinLabel.textContent = `₹${minValue.toLocaleString()}`;
            applyFilters();
          });
        }

        if (priceMaxSlider) {
          priceMaxSlider.addEventListener("input", function () {
            const maxValue = parseInt(this.value);
            const minValue = parseInt(priceMinSlider.value);

            if (maxValue < minValue) {
              priceMinSlider.value = maxValue;
              if (priceMinLabel)
                priceMinLabel.textContent = `₹${maxValue.toLocaleString()}`;
            }

            if (priceMaxLabel)
              priceMaxLabel.textContent = `₹${maxValue.toLocaleString()}`;
            applyFilters();
          });
        }

        // AI Score checkboxes
        const aiScoreAbove80 = document.getElementById("aiScoreAbove80");
        const aiScoreBelow80 = document.getElementById("aiScoreBelow80");
        aiScoreAbove80.addEventListener("change", applyFilters);
        aiScoreBelow80.addEventListener("change", applyFilters);

        // Search filter
        const searchFilter = document.getElementById("searchFilter");
        searchFilter.addEventListener("input", applyFilters);

        // Status filters
        const statusValid = document.getElementById("statusValid");
        const statusBlocked = document.getElementById("statusBlocked");
        statusValid.addEventListener("change", applyFilters);
        statusBlocked.addEventListener("change", applyFilters);

        // Sort select
        const sortSelect = document.getElementById("sortSelect");
        sortSelect.addEventListener("change", applyFilters);

        // Clear filters button
        const clearFilters = document.getElementById("clearFilters");
        clearFilters.addEventListener("click", clearAllFilters);
      }

      // Apply all filters
      function applyFilters() {
        const searchTerm = document
          .getElementById("searchFilter")
          .value.toLowerCase();
        const priceMin = parseInt(document.getElementById("priceMin").value);
        const priceMax = parseInt(document.getElementById("priceMax").value);
        const aiScoreAbove80 =
          document.getElementById("aiScoreAbove80").checked;
        const aiScoreBelow80 =
          document.getElementById("aiScoreBelow80").checked;
        const statusValid = document.getElementById("statusValid").checked;
        const statusBlocked = document.getElementById("statusBlocked").checked;
        const sortBy = document.getElementById("sortSelect").value;

        console.log("Filter states:", {
          searchTerm,
          priceMin,
          priceMax,
          aiScoreAbove80,
          aiScoreBelow80,
          statusValid,
          statusBlocked,
          sortBy,
        });

        // Filter products
        filteredProducts = allProducts.filter((product) => {
          // Search filter
          const matchesSearch =
            product.product_name.toLowerCase().includes(searchTerm) ||
            (product.description &&
              product.description.toLowerCase().includes(searchTerm));

          // Price filter
          const productPrice = product.price || 0;
          const matchesPrice =
            productPrice >= priceMin && productPrice <= priceMax;

          // AI Score filter
          const aiScoreDecimal = product.ensemble_score || 0;
          const aiScorePercentage = Math.round(aiScoreDecimal * 100);
          let matchesAiScore = aiScoreAbove80 || aiScoreBelow80;
          if (matchesAiScore && !(aiScoreAbove80 && aiScoreBelow80)) {
            matchesAiScore = aiScoreAbove80
              ? aiScorePercentage >= 80
              : aiScorePercentage < 80;
          }

          // Status filter
          let matchesStatus = statusValid || statusBlocked;
          if (matchesStatus && !(statusValid && statusBlocked)) {
            matchesStatus = statusValid
              ? product.status === "valid"
              : product.status === "blocked_ai" ||
                product.status === "blocked_batch";
          }

          const matches =
            matchesSearch && matchesPrice && matchesAiScore && matchesStatus;
          console.log(
            `Product: ${product.product_name}, Search: ${matchesSearch}, Price: ${matchesPrice}, AI: ${matchesAiScore}, Status: ${matchesStatus}, Final: ${matches}`
          );

          return matches;
        });

        // Sort products
        sortProducts(sortBy);

        // Reset pagination to first page when filters change
        currentPage = 1;

        // Display filtered products
        displayProducts();
      }

      // Sort products
      function sortProducts(sortBy) {
        switch (sortBy) {
          case "name":
            filteredProducts.sort((a, b) =>
              a.product_name.localeCompare(b.product_name)
            );
            break;
          case "name-desc":
            filteredProducts.sort((a, b) =>
              b.product_name.localeCompare(a.product_name)
            );
            break;
          case "price-low":
            filteredProducts.sort((a, b) => (a.price || 0) - (b.price || 0));
            break;
          case "price-high":
            filteredProducts.sort((a, b) => (b.price || 0) - (a.price || 0));
            break;
          case "ai-score-high":
            filteredProducts.sort(
              (a, b) => (b.ensemble_score || 0) - (a.ensemble_score || 0)
            );
            break;
          case "ai-score-low":
            filteredProducts.sort(
              (a, b) => (a.ensemble_score || 0) - (b.ensemble_score || 0)
            );
            break;
        }
      }

      // Clear all filters
      function clearAllFilters() {
        // Calculate max price from products
        const maxPrice =
          allProducts.length > 0
            ? Math.max(...allProducts.map((p) => p.price || 0))
            : 100000;

        document.getElementById("searchFilter").value = "";
        document.getElementById("priceMin").value = 0;
        document.getElementById("priceMax").value = maxPrice;
        document.getElementById("aiScoreAbove80").checked = true;
        document.getElementById("aiScoreBelow80").checked = true;
        document.getElementById("statusValid").checked = true;
        document.getElementById("statusBlocked").checked = false;
        document.getElementById("sortSelect").value = "name";

        // Update labels
        document.getElementById("priceMinLabel").textContent = "₹0";
        document.getElementById(
          "priceMaxLabel"
        ).textContent = `₹${maxPrice.toLocaleString()}`;

        applyFilters();
      }

      // Display products
      function displayProducts() {
        const productsGrid = document.getElementById("productsGrid");
        const productCount = document.getElementById("productCount");
        const paginationContainer = document.getElementById(
          "paginationContainer"
        );

        // Clear existing content
        productsGrid.innerHTML = "";

        // Update product count
        productCount.textContent = `${filteredProducts.length} products found`;

        console.log("Displaying products:", filteredProducts);
        console.log("Number of filtered products:", filteredProducts.length);

        if (filteredProducts.length === 0) {
          productsGrid.innerHTML =
            '<div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;">No products found matching your search</div>';
          paginationContainer.style.display = "none";
          return;
        }

        // Calculate pagination
        totalPages = Math.ceil(filteredProducts.length / pageSize);
        const startIndex = (currentPage - 1) * pageSize;
        const endIndex = Math.min(
          startIndex + pageSize,
          filteredProducts.length
        );
        const currentPageProducts = filteredProducts.slice(
          startIndex,
          endIndex
        );

        // Create product cards for current page
        currentPageProducts.forEach((product) => {
          const productCard = document.createElement("div");
          productCard.className = "product-card";

          const productPrice = product.price || 0;
          const aiScoreDecimal = product.ensemble_score || 0;
          const aiScorePercentage = Math.round(aiScoreDecimal * 100);

          // Calculate average rating (default to 3.0 if no reviews)
          const avgRating = product.avg_rating || 3.0;
          const starRating = Math.round(avgRating);
          const hasHalfStar = avgRating % 1 >= 0.5;

          // Add score class based on AI score
          if (aiScorePercentage > 80) {
            productCard.classList.add("score-high");
          } else if (aiScorePercentage >= 60) {
            productCard.classList.add("score-medium");
          } else {
            productCard.classList.add("score-low");
          }

          productCard.innerHTML = `
            <div class="image-container">
              <img src="${
                product.images && product.images.length > 0
                  ? product.images[0]
                  : "/static/amazon_logo.png"
              }" alt="${product.product_name}">
            </div>
            <h3>${product.product_name}</h3>
            <p class="description">${
              product.description || "No description available"
            }</p>
            <div class="rating-section">
              <div class="stars">
                ${"★".repeat(starRating)}${hasHalfStar ? "☆" : ""}${"☆".repeat(
            5 - starRating - (hasHalfStar ? 1 : 0)
          )}
              </div>
              <span class="rating-text">${avgRating.toFixed(1)}</span>
            </div>
            <div class="ai-score">AI Score: ${aiScorePercentage}%</div>
            <div class="status ${product.status || "valid"}">${
            product.status || "valid"
          }</div>
            <div class="price">₹${productPrice.toLocaleString()}</div>
            <div class="buttons">
              <button class="add-to-cart" onclick="addToCart('${
                product.id || product._id || ""
              }')">Add to Cart</button>
              <button class="view-details" onclick="viewDetails('${
                product.id || product._id || ""
              }')">View Details</button>
            </div>
          `;

          productsGrid.appendChild(productCard);
        });

        // Update pagination
        updatePagination();
      }

      // Pagination functions
      function updatePagination() {
        const paginationContainer = document.getElementById(
          "paginationContainer"
        );
        const pageNumbers = document.getElementById("pageNumbers");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const paginationInfo = document.getElementById("paginationInfo");

        if (totalPages <= 1) {
          paginationContainer.style.display = "none";
          return;
        }

        paginationContainer.style.display = "flex";

        // Update pagination info
        const startIndex = (currentPage - 1) * pageSize + 1;
        const endIndex = Math.min(
          currentPage * pageSize,
          filteredProducts.length
        );
        paginationInfo.textContent = `Showing ${startIndex}-${endIndex} of ${filteredProducts.length} products`;

        // Update Previous/Next buttons
        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = currentPage === totalPages;

        // Generate page numbers
        pageNumbers.innerHTML = "";
        const maxVisiblePages = 5;
        let startPage = Math.max(
          1,
          currentPage - Math.floor(maxVisiblePages / 2)
        );
        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

        if (endPage - startPage + 1 < maxVisiblePages) {
          startPage = Math.max(1, endPage - maxVisiblePages + 1);
        }

        // Add first page if not visible
        if (startPage > 1) {
          addPageButton(1);
          if (startPage > 2) {
            addPageButton("...");
          }
        }

        // Add visible page numbers
        for (let i = startPage; i <= endPage; i++) {
          addPageButton(i);
        }

        // Add last page if not visible
        if (endPage < totalPages) {
          if (endPage < totalPages - 1) {
            addPageButton("...");
          }
          addPageButton(totalPages);
        }
      }

      function addPageButton(pageNum) {
        const pageNumbers = document.getElementById("pageNumbers");
        const button = document.createElement("button");
        button.className = "pagination-btn";

        if (pageNum === "...") {
          button.textContent = "...";
          button.disabled = true;
        } else {
          button.textContent = pageNum;
          if (pageNum === currentPage) {
            button.classList.add("active");
          }
          button.onclick = () => goToPage(pageNum);
        }

        pageNumbers.appendChild(button);
      }

      function goToPage(page) {
        if (page >= 1 && page <= totalPages) {
          currentPage = page;
          displayProducts();
        }
      }

      function previousPage() {
        if (currentPage > 1) {
          currentPage--;
          displayProducts();
        }
      }

      function nextPage() {
        if (currentPage < totalPages) {
          currentPage++;
          displayProducts();
        }
      }

      function changePageSize() {
        const newPageSize = parseInt(document.getElementById("pageSize").value);
        pageSize = newPageSize;
        currentPage = 1; // Reset to first page
        displayProducts();
      }

      // Global functions for buttons
      window.addToCart = function (productId) {
        alert(`Product ${productId} added to cart!`);
      };

      window.viewDetails = function (productId) {
        console.log("View Details clicked for product ID:", productId);
        if (!productId || productId === "") {
          alert("Product ID not found. Please try again.");
          return;
        }
        window.location.href = `/product/${productId}`;
      };

      // Initialize the page
      async function initializePage() {
        console.log("Initializing page...");
        allProducts = await fetchProducts();
        console.log("Fetched products:", allProducts);
        console.log("Number of products:", allProducts.length);

        filteredProducts = [...allProducts];

        // Debug: Log AI scores
        console.log("Products with AI scores:");
        allProducts.forEach((product) => {
          const aiScoreDecimal = product.ensemble_score || 0;
          const aiScorePercentage = Math.round(aiScoreDecimal * 100);
          console.log(
            `${product.product_name}: ${aiScoreDecimal} (${aiScorePercentage}%)`
          );
        });

        initializeFilters();
        applyFilters();
      }

      // Start the application
      initializePage();

      // Search functionality for header
      const searchButton = document.querySelector(".search-bar button");
      const searchInput = document.querySelector(".search-bar input");

      if (searchButton && searchInput) {
        searchButton.addEventListener("click", () => {
          window.location.href = `search.html?search=${encodeURIComponent(
            searchInput.value
          )}`;
        });
        searchInput.addEventListener("keypress", (e) => {
          if (e.key === "Enter") searchButton.click();
        });
      }

      // Verified Products Toggle
      const verifiedToggle = document.getElementById("verifiedToggle");
      if (verifiedToggle) {
        verifiedToggle.addEventListener("change", () => {
          console.log("Verified toggle changed:", verifiedToggle.checked);
          applyFilters();
        });
      }

      // Get consistent price for a product based on its ID
      function getProductPrice(product) {
        const idString = product.id
          ? product.id.toString()
          : product.product_name || "default";
        const hash = idString.split("").reduce((a, b) => {
          a = (a << 5) - a + b.charCodeAt(0);
          return a & a;
        }, 0);
        return (Math.abs(hash) % 50000) + 10000; // Price between 10,000 and 60,000
      }

      // Authentication state management
      function checkAuthStatus() {
        const token = localStorage.getItem("token");
        const userType = localStorage.getItem("user_type");
        const userName = localStorage.getItem("user_name");
        const authLinks = document.getElementById("auth-links");

        if (token && userName) {
          // User is logged in
          authLinks.innerHTML = `
            <div class="user-menu-container">
              <a href="#" onclick="showUserMenu()" class="user-menu-trigger">Hello, ${userName}<br />Account & Lists</a>
              <div id="user-menu" class="user-dropdown-menu">
                <div class="user-menu-header">
                  <strong>${userName}</strong>
                  <span style="color: #666; font-size: 12px;">${userType}</span>
                </div>
                <div class="user-menu-divider"></div>
                <a href="/profile" class="user-menu-item">
                  <i class="fas fa-user"></i> Profile
                </a>
                <a href="/orders" class="user-menu-item">
                  <i class="fas fa-box"></i> Orders
                </a>
                ${
                  userType === "seller"
                    ? '<a href="/seller/dashboard" class="user-menu-item"><i class="fas fa-store"></i> Seller Dashboard</a>'
                    : ""
                }
                ${
                  userType === "admin"
                    ? '<a href="/admin" class="user-menu-item"><i class="fas fa-shield-alt"></i> Admin Panel</a>'
                    : ""
                }
                <div class="user-menu-divider"></div>
                <button onclick="logout()" class="logout-btn">
                  <i class="fas fa-sign-out-alt"></i> Sign Out
                </button>
              </div>
            </div>
          `;
        } else {
          // User is not logged in
          authLinks.innerHTML = `
            <a href="/login">Hello, Sign in<br />Account & Lists</a>
            <a href="/register">Register</a>
          `;
        }
      }

      function showUserMenu() {
        const menu = document.getElementById("user-menu");
        if (menu) {
          menu.style.display = menu.style.display === "none" ? "block" : "none";
        }
      }

      function logout() {
        localStorage.removeItem("token");
        localStorage.removeItem("user_type");
        localStorage.removeItem("user_id");
        localStorage.removeItem("user_name");
        window.location.href = "/register";
      }

      // Expose functions globally for inline onclick
      window.showUserMenu = showUserMenu;
      window.logout = logout;

      // Check auth status on page load
      checkAuthStatus();

      // Close user menu when clicking outside
      document.addEventListener("click", function (event) {
        const userMenu = document.getElementById("user-menu");
        const authLinks = document.getElementById("auth-links");
        if (userMenu && !authLinks.contains(event.target)) {
          userMenu.style.display = "none";
        }
      });
    });
  </script>
</html>
